<svg width="900" height="600" viewBox="0 0 900 600" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#06b6d4"/>
    </linearGradient>
    <linearGradient id="coreGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f0f9ff"/>
      <stop offset="100%" style="stop-color:#e0f2fe"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="600" fill="#f8fafc"/>

  <!-- Title -->
  <text x="450" y="35" font-family="system-ui, sans-serif" font-size="24" font-weight="700" fill="#1e293b" text-anchor="middle">Transcode Architecture</text>

  <!-- Top Layer: High-Level API -->
  <g filter="url(#shadow)">
    <rect x="200" y="60" width="500" height="60" rx="8" fill="url(#headerGrad)"/>
    <text x="450" y="95" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="white" text-anchor="middle">transcode (High-Level API)</text>
  </g>

  <!-- Arrow down -->
  <path d="M450 120 L450 145 L440 135 M450 145 L460 135" stroke="#64748b" stroke-width="2" fill="none"/>

  <!-- Middle Layer: Core Components -->
  <g filter="url(#shadow)">
    <!-- Core box -->
    <rect x="50" y="155" width="180" height="100" rx="8" fill="url(#coreGrad)" stroke="#3b82f6" stroke-width="2"/>
    <rect x="50" y="155" width="180" height="30" rx="8 8 0 0" fill="#3b82f6"/>
    <text x="140" y="175" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">transcode-core</text>
    <text x="140" y="200" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">Error types</text>
    <text x="140" y="215" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">Bitstream I/O</text>
    <text x="140" y="230" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">Frame / Packet</text>
    <text x="140" y="245" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">Timestamps</text>

    <!-- Codecs box -->
    <rect x="260" y="155" width="180" height="100" rx="8" fill="url(#coreGrad)" stroke="#3b82f6" stroke-width="2"/>
    <rect x="260" y="155" width="180" height="30" rx="8 8 0 0" fill="#3b82f6"/>
    <text x="350" y="175" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">transcode-codecs</text>
    <text x="350" y="200" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">H.264, H.265, AV1</text>
    <text x="350" y="215" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">VP9, ProRes</text>
    <text x="350" y="230" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">AAC, Opus, FLAC</text>
    <text x="350" y="245" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">MP3, AC3, DTS</text>

    <!-- Containers box -->
    <rect x="470" y="155" width="180" height="100" rx="8" fill="url(#coreGrad)" stroke="#3b82f6" stroke-width="2"/>
    <rect x="470" y="155" width="180" height="30" rx="8 8 0 0" fill="#3b82f6"/>
    <text x="560" y="175" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">transcode-containers</text>
    <text x="560" y="200" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">MP4 / MOV</text>
    <text x="560" y="215" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">MKV / WebM</text>
    <text x="560" y="230" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">HLS / DASH</text>
    <text x="560" y="245" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">MPEG-TS</text>

    <!-- Pipeline box -->
    <rect x="680" y="155" width="180" height="100" rx="8" fill="url(#coreGrad)" stroke="#3b82f6" stroke-width="2"/>
    <rect x="680" y="155" width="180" height="30" rx="8 8 0 0" fill="#3b82f6"/>
    <text x="770" y="175" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">transcode-pipeline</text>
    <text x="770" y="200" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">Orchestration</text>
    <text x="770" y="215" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">Data flow</text>
    <text x="770" y="230" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">Threading</text>
    <text x="770" y="245" font-family="system-ui, sans-serif" font-size="11" fill="#475569" text-anchor="middle">Memory pools</text>
  </g>

  <!-- Arrows between core components -->
  <path d="M230 205 L260 205" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="4"/>
  <path d="M440 205 L470 205" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="4"/>
  <path d="M650 205 L680 205" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="4"/>

  <!-- Processing Layer -->
  <text x="450" y="290" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#64748b" text-anchor="middle">Processing Extensions</text>

  <g filter="url(#shadow)">
    <!-- GPU -->
    <rect x="50" y="305" width="130" height="70" rx="6" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
    <text x="115" y="335" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#92400e" text-anchor="middle">transcode-gpu</text>
    <text x="115" y="355" font-family="system-ui, sans-serif" font-size="10" fill="#a16207" text-anchor="middle">wgpu compute</text>

    <!-- AI -->
    <rect x="195" y="305" width="130" height="70" rx="6" fill="#fce7f3" stroke="#ec4899" stroke-width="1.5"/>
    <text x="260" y="335" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#9d174d" text-anchor="middle">transcode-ai</text>
    <text x="260" y="355" font-family="system-ui, sans-serif" font-size="10" fill="#be185d" text-anchor="middle">Neural enhancement</text>

    <!-- Quality -->
    <rect x="340" y="305" width="130" height="70" rx="6" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5"/>
    <text x="405" y="335" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#166534" text-anchor="middle">transcode-quality</text>
    <text x="405" y="355" font-family="system-ui, sans-serif" font-size="10" fill="#15803d" text-anchor="middle">PSNR, SSIM, VMAF</text>

    <!-- Distributed -->
    <rect x="485" y="305" width="130" height="70" rx="6" fill="#e0e7ff" stroke="#6366f1" stroke-width="1.5"/>
    <text x="550" y="335" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#3730a3" text-anchor="middle">transcode-distributed</text>
    <text x="550" y="355" font-family="system-ui, sans-serif" font-size="10" fill="#4338ca" text-anchor="middle">Worker coordination</text>

    <!-- Intel -->
    <rect x="630" y="305" width="130" height="70" rx="6" fill="#f0fdfa" stroke="#14b8a6" stroke-width="1.5"/>
    <text x="695" y="335" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#115e59" text-anchor="middle">transcode-intel</text>
    <text x="695" y="355" font-family="system-ui, sans-serif" font-size="10" fill="#0d9488" text-anchor="middle">Scene detection</text>

    <!-- Streaming -->
    <rect x="775" y="305" width="100" height="70" rx="6" fill="#fff7ed" stroke="#f97316" stroke-width="1.5"/>
    <text x="825" y="335" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#9a3412" text-anchor="middle">streaming</text>
    <text x="825" y="355" font-family="system-ui, sans-serif" font-size="10" fill="#c2410c" text-anchor="middle">HLS / DASH</text>
  </g>

  <!-- Platform Bindings Layer -->
  <text x="450" y="415" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#64748b" text-anchor="middle">Platform Bindings</text>

  <g filter="url(#shadow)">
    <!-- CLI -->
    <rect x="100" y="430" width="110" height="55" rx="6" fill="#f1f5f9" stroke="#475569" stroke-width="1.5"/>
    <text x="155" y="455" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#334155" text-anchor="middle">CLI</text>
    <text x="155" y="472" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">transcode-cli</text>

    <!-- Python -->
    <rect x="230" y="430" width="110" height="55" rx="6" fill="#fef9c3" stroke="#ca8a04" stroke-width="1.5"/>
    <text x="285" y="455" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#854d0e" text-anchor="middle">Python</text>
    <text x="285" y="472" font-family="system-ui, sans-serif" font-size="10" fill="#a16207" text-anchor="middle">PyO3</text>

    <!-- Node.js -->
    <rect x="360" y="430" width="110" height="55" rx="6" fill="#dcfce7" stroke="#16a34a" stroke-width="1.5"/>
    <text x="415" y="455" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#166534" text-anchor="middle">Node.js</text>
    <text x="415" y="472" font-family="system-ui, sans-serif" font-size="10" fill="#15803d" text-anchor="middle">N-API</text>

    <!-- WASM -->
    <rect x="490" y="430" width="110" height="55" rx="6" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5"/>
    <text x="545" y="455" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#5b21b6" text-anchor="middle">WebAssembly</text>
    <text x="545" y="472" font-family="system-ui, sans-serif" font-size="10" fill="#6d28d9" text-anchor="middle">wasm-bindgen</text>

    <!-- C API -->
    <rect x="620" y="430" width="110" height="55" rx="6" fill="#f1f5f9" stroke="#475569" stroke-width="1.5"/>
    <text x="675" y="455" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#334155" text-anchor="middle">C API</text>
    <text x="675" y="472" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">FFI</text>
  </g>

  <!-- Data Flow Section -->
  <text x="450" y="530" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#64748b" text-anchor="middle">Data Flow</text>

  <!-- Data flow pipeline -->
  <g transform="translate(100, 545)">
    <rect x="0" y="0" width="80" height="40" rx="4" fill="#dbeafe" stroke="#3b82f6" stroke-width="1.5"/>
    <text x="40" y="25" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#1e40af" text-anchor="middle">Demuxer</text>

    <path d="M80 20 L110 20" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowhead)"/>
    <polygon points="105,15 115,20 105,25" fill="#3b82f6"/>

    <rect x="115" y="0" width="80" height="40" rx="4" fill="#dbeafe" stroke="#3b82f6" stroke-width="1.5"/>
    <text x="155" y="25" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#1e40af" text-anchor="middle">Decoder</text>

    <path d="M195 20 L225 20" stroke="#3b82f6" stroke-width="2"/>
    <polygon points="220,15 230,20 220,25" fill="#3b82f6"/>

    <rect x="230" y="0" width="80" height="40" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
    <text x="270" y="25" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#92400e" text-anchor="middle">Filters</text>

    <path d="M310 20 L340 20" stroke="#3b82f6" stroke-width="2"/>
    <polygon points="335,15 345,20 335,25" fill="#3b82f6"/>

    <rect x="345" y="0" width="80" height="40" rx="4" fill="#dbeafe" stroke="#3b82f6" stroke-width="1.5"/>
    <text x="385" y="25" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#1e40af" text-anchor="middle">Encoder</text>

    <path d="M425 20 L455 20" stroke="#3b82f6" stroke-width="2"/>
    <polygon points="450,15 460,20 450,25" fill="#3b82f6"/>

    <rect x="460" y="0" width="80" height="40" rx="4" fill="#dbeafe" stroke="#3b82f6" stroke-width="1.5"/>
    <text x="500" y="25" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#1e40af" text-anchor="middle">Muxer</text>

    <!-- Labels -->
    <text x="40" y="-8" font-family="system-ui, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Input</text>
    <text x="500" y="-8" font-family="system-ui, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Output</text>
  </g>
</svg>
